import{w as x,B as V,G as R,T as j,C as U,a7 as q,a as N,V as O,D as F,u as X,am as Y,an as H,O as J,b as K}from"./GLTFLoader-Cpm_xSlR.js";import{d as Q,f as W,p as Z,k as $,w as tt,q as et,o as ot,h as A}from"./index-qyBmO-yZ.js";import{a as nt}from"./_plugin-vue_export-helper-CQ7wvoWd.js";const M=new x;function y(P,f,u,i,n,e){const p=2*Math.PI*n/4,m=Math.max(e-2*n,0),t=Math.PI/4;M.copy(f),M[i]=0,M.normalize();const w=.5*p/(p+m),d=1-M.angleTo(P)/t;return Math.sign(M[u])===1?d*w:m/(p+m)+w+w*(1-d)}class st extends V{constructor(f=1,u=1,i=1,n=2,e=.1){if(n=n*2+1,e=Math.min(f/2,u/2,i/2,e),super(1,1,1,n,n,n),n===1)return;const p=this.toNonIndexed();this.index=null,this.attributes.position=p.attributes.position,this.attributes.normal=p.attributes.normal,this.attributes.uv=p.attributes.uv;const m=new x,t=new x,w=new x(f,u,i).divideScalar(2).subScalar(e),d=this.attributes.position.array,h=this.attributes.normal.array,l=this.attributes.uv.array,S=d.length/6,s=new x,g=.5/n;for(let r=0,a=0;r<d.length;r+=3,a+=2)switch(m.fromArray(d,r),t.copy(m),t.x-=Math.sign(t.x)*g,t.y-=Math.sign(t.y)*g,t.z-=Math.sign(t.z)*g,t.normalize(),d[r+0]=w.x*Math.sign(m.x)+t.x*e,d[r+1]=w.y*Math.sign(m.y)+t.y*e,d[r+2]=w.z*Math.sign(m.z)+t.z*e,h[r+0]=t.x,h[r+1]=t.y,h[r+2]=t.z,Math.floor(r/S)){case 0:s.set(1,0,0),l[a+0]=y(s,t,"z","y",e,i),l[a+1]=1-y(s,t,"y","z",e,u);break;case 1:s.set(-1,0,0),l[a+0]=1-y(s,t,"z","y",e,i),l[a+1]=1-y(s,t,"y","z",e,u);break;case 2:s.set(0,1,0),l[a+0]=1-y(s,t,"x","z",e,f),l[a+1]=y(s,t,"z","x",e,i);break;case 3:s.set(0,-1,0),l[a+0]=1-y(s,t,"x","z",e,f),l[a+1]=1-y(s,t,"z","x",e,i);break;case 4:s.set(0,0,1),l[a+0]=1-y(s,t,"x","y",e,f),l[a+1]=1-y(s,t,"y","x",e,u);break;case 5:s.set(0,0,-1),l[a+0]=y(s,t,"x","y",e,f),l[a+1]=1-y(s,t,"y","x",e,u);break}}}const B=.1,C=5,D=3,at=1,rt=Q({__name:"index",setup(P){new R,new j;let f,u,i,n,e,p,m,t;function w(){({container:f,renderer:u,scene:i,camera:n,clock:e,viewPort:p,tick:m}=X(document.querySelector(".webgl")))}function d(){n.position.set(8,8,8);const c=new Y(11184810,1.5);i.add(c);const o=new H(16777215,2);o.position.set(-10,20,20),o.angle=.15,o.penumbra=1,o.decay=0,o.castShadow=!0,i.add(o)}function h(){t=new J(n,u.domElement),t.enableDamping=!0}function l(){tt(p,()=>{const{width:c,height:o}=p.value;n.aspect=c/o,n.updateProjectionMatrix(),u.setSize(c,o,!1)})}let S;function s(){S=new K({container:document.querySelector(".debug")}),et(()=>S.destroy)}W(()=>{w(),s(),h(),l(),d(),E(),G(),m(()=>{e.getElapsedTime(),t.update(),g.forEach(c=>{a.copy(c.userData.originalPosition),_.copy(a).sub(r).normalize();const o=a.distanceTo(r),v=D-o,b=Math.max(.5,v)/1.5;o>D*1.1?c.material.color.lerp(new U("white"),.1):c.material.color.lerp(new U(b/2,b*2,b*4),.2),o>D?c.position.lerp(a,.2):(T.copy(a).add(_.multiplyScalar(v*at)),c.position.lerp(T,.2))}),u.render(i,n)})});let g=[];const r=new x,a=new x,T=new x,_=new x;function E(){const c=new st(1,1,1,2,.15),o=new q,v=C/2;for(let b=0;b<C;b++)for(let k=0;k<C;k++)for(let L=0;L<C;L++){const z=new N(c,o.clone()),I=new x(b+b*B-v,k+k*B-v,L+L*B-v);z.position.copy(I),z.userData.originalPosition=I.clone(),z.castShadow=!0,z.receiveShadow=!0,i.add(z),g.push(z)}}function G(){f.addEventListener("mousemove",c=>{const o=new O;o.x=c.offsetX/p.value.width*2-1,o.y=-(c.offsetY/p.value.height)*2+1,r.set(o.x,o.y,.5).unproject(n),_.copy(r).sub(n.position).normalize(),r.add(_.multiplyScalar(n.position.length()))})}return(c,o)=>(ot(),Z(F,null,{default:$(()=>o[0]||(o[0]=[A("div",{class:"webgl"},null,-1),A("div",{class:"debug"},null,-1)])),_:1}))}}),ut=nt(rt,[["__scopeId","data-v-b39c4e48"]]);export{ut as default};
